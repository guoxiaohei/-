## NoSQL数据库的四大分类

- KV
  - 新浪：BerkeleyDB + Redis
  - 美团：Redis + tair
  - 阿里、百度：memcache + Redis
- 文档型数据库（bson格式比较多）
  - CouchDB
  - MongoDB
    - MongoDB是一个基于分布式文件存储的数据库。由C++语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。
    - MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。
- 列存储数据库
  - Cassandra、HBase
  - 分布式文件系统
- 图关系数据库
  - 它不是放图形的、放的是关系比如：朋友圈社交网络、广告推荐系统
  - 社交网络、推荐系统。专注于构建关系图谱
  - Neo4j、InfoGrid

## 分布式数据库CAP原理

- ### CAP

  - C:Consistency（强一致性）
  - A:Availability（可用性）
  - P:Partition tolerance（分区容错性）

  CAP理论就是说在分布式存储系统中，最多只能实现上面的两点。

  而由于当前的网络硬件肯定会出现延迟丢包等问题，所以**分区容忍性**是我们必须需要实现的。所以我们只能在**一致性**和**可用性**之间进行权衡，**没有**NoSQL系统能同时保证这三点。

  - CA 传统Oracle数据库
  - AP 大多数网站架构的选择
  - CP Redis、Mongodb

  根据 CAP 原理将 NoSQL 数据库分成了满足 CA 原则、满足 CP 原则和满足 AP 原则三 大类：

  - CA - 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大。
  - CP - 满足一致性，分区容忍必的系统，通常性能不是特别高。
  - AP - 满足可用性，分区容忍性的系统，通常可能对一致性要求低一些。

  注意：分布式架构的时候必须做出取舍。

  一致性和可用性之间取一个平衡。多余大多数web应用，其实并不需要强一致性。因此牺牲C换取P，这是目前分布式数据库产品的方向。
![aHR0cHM6Ly9naXRlZS5jb20vamFsbGVua3dvbmcvTGVhcm5SZWRpcy9yYXcvbWFzdGVyL2ltYWdlLzIwLnBuZw](http://weiguo-1303915920.cos.ap-nanjing.myqcloud.com/d36d86a4e4293010864d6c34748f9b95.png)

- ### 分布式+集群简介

分布式系统（distributed system）

由多台计算机和通信的软件组件通过计算机网络连接（本地网络或广域网）组成。分布式系统是建立在网络之上的软件系统。正是因为软件的特性，所以分布式系统具有高度的内聚性和透明性。因此，网络和分布式系统之间的区别更多的在于高层软件（特别是操作系统），而不是硬件。分布式系统可以应用在在不同的平台上如：PC、工作站、局域网和广域网上等。

简单来讲：

1. 分布式：不同的多台服务器上面部署**不同**的服务模块（工程），他们之间通过Rpc/Rmi之间通信和调用，对外提供服务和组内协作。
2. 集群：不同的多台服务器上面部署**相同**的服务模块，通过分布式调度软件进行统一的调度，对外提供服务和访问。

## 启动后杂项基础知识

- `C:\Program Files\Redis-x64-3.2.100>redis-benchmark.exe` 测试redis在机器运行的效能

- 单进程

  - 单进程模型来处理客户端的请求。对读写等事件的响应 是通过对epoll函数的包装来做到的。Redis的实际处理速度完全依靠主进程的执行效率
  - Epoll是Linux内核为处理大批量文件描述符而作了改进的epoll，是Linux下多路复用IO接口select/poll的增强版本， 它能显著提高程序在大量并发连接中只有少量活跃的情况下的系统CPU利用率。

- 默认16个数据库，类似数组下表从零开始，初始默认使用零号库，可在配置文件配置

- `select`命令切换数据库

- `dbsize`查看当前数据库的key的数量

- `flushdb`：清空当前库

- `flushall`；通杀全部库

- 统一密码管理，16个库都是同样密码，要么都OK要么一个也连接不上

- Redis索引都是从零开始

- 为什么默认端口是6379

  